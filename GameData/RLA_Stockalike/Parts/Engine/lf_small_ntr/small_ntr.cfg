//Not based on any one NTR concept despite being named after MITEE.

PART
{

// --- general parameters ---
name = RLA_small_ntr
module = Part
author = hoojiwana

// --- asset parameters ---
mesh = model.mu
scale = 1
rescaleFactor = 1

// --- node definitions ---
node_stack_top = 0.0, 0.361, 0.0, 0.0, 1.0, 0.0, 0
node_stack_bottom = 0.0, -0.98, 0.0, 0.0, -1.0, 0.0, 0

fx_exhaustFlame_blue_small = 0.0, -21.0, 0.0, 0.0, 1.0, 0.0, running
fx_smokeTrail_light  = 0.0, -21.0, 0.0, 0.0, 1.0, 0.0, running

sound_vent_medium = engage
sound_rocket_hard = running
sound_vent_soft = disengage
sound_explosion_low = flameout

TechRequired = nuclearPropulsion
entryCost = 25000
cost = 2500
category = Engine
subcategory = 0
title = LV-Nc "Mighty" Atomic Rocket Motor
manufacturer = Roemy-Lemdum Atomics
description = Although lacking the trefoil on the side, this pint-sized engine still emits radiation and spews forth hot exhaust gasses. It almost looks cute, as far as a miniature nuclear reactor can at least.

attachRules = 1,0,1,0,0

mass = 0.32
dragModelType = default
maximum_drag = 0.2
minimum_drag = 0.2
angularDrag = 2
crashTolerance = 12
breakingForce = 200
breakingTorque = 200

maxTemp = 2500
skinInternalConductionMult = 4.0
emissiveConstant = 0.85 // engine nozzles are good at radiating.
radiatorMax = 0.35 //Default = 0.25 but nuke engines are meant to run hot

bulkheadProfiles = size0

tags = (mighty active atom efficient engine inter liquid nuclear nuke orbit propuls radio reactor vacuum ?rla

MODULE
{
	name = ModuleEnginesFX
	powerEffectName = ntrsmall
	thrustVectorTransformName = thrustTransform
	exhaustDamage = True
	ignitionThreshold = 0.1
	minThrust = 0
	maxThrust = 6
	heatProduction = 250 // 275
	fxOffset = 0, 0, 0.125
	EngineType = Nuclear
	PROPELLANT
	{
	 	name = LiquidFuel
		ratio = 0.9 // 1
		DrawGauge = True
	}
	atmosphereCurve
 	{
		key = 0 750
		key = 1 150
		key = 2 0.001
 	}

}

MODULE
{
		name = FXModuleAnimateThrottle
		animationName = Porkalike_Heat
		responseSpeed = 0.001
		dependOnEngineState = True
		dependOnThrottle = True
}

MODULE
{
   name = ModuleJettison
   jettisonName = fairing
   bottomNodeName = bottom
   isFairing = True
   jettisonedObjectMass = 0.02
   jettisonForce = 2
   jettisonDirection = 0 0 1
}

MODULE
{
	name = ModuleAlternator
	RESOURCE
	{
		name = ElectricCharge
		rate = 1.0
	}
}

MODULE
{
	name = ModuleTestSubject
	useStaging = True
	useEvent = True
	situationMask = 121
	CONSTRAINT
	{
		type = REPEATABILITY
		value = ALWAYS
		prestige = Trivial
	}
	CONSTRAINT
	{
		type = REPEATABILITY
		value = BODYANDSITUATION
		prestige = Significant
	}
	CONSTRAINT
	{
		type = REPEATABILITY
		value = ONCEPERPART
		prestige = Exceptional
	}
	CONSTRAINT
	{
		type = ALTITUDEENV
		test = GT
		value = 4000
		prestige = Trivial
	}
	CONSTRAINT
	{
		type = ALTITUDEENV
		test = LT
		value = 8000
		prestige = Trivial
	}
	CONSTRAINT
	{
		type = ALTITUDEENV
		test = GT
		value = 2000
		prestige = Significant
	}
	CONSTRAINT
	{
		type = ALTITUDEENV
		test = LT
		value = 4000
		prestige = Significant
	}
	CONSTRAINT
	{
		type = ALTITUDEENV
		test = GT
		value = 1000
		prestige = Exceptional
	}
	CONSTRAINT
	{
		type = ALTITUDEENV
		test = LT
		value = 2000
		prestige = Exceptional
	}
	CONSTRAINT
	{
		type = ALTITUDE
		test = LT
		value = 300000
		situationMask = 16
		body = _NotSun
	}
	CONSTRAINT
	{
		type = ALTITUDE
		test = LT
		value = 600000
		situationMask = 32
		body = _NotSun
	}
	CONSTRAINT
	{
		type = SPEED
		test = GT
		value = 0
		situationMask = 8
		prestige = Trivial
	}
	CONSTRAINT
	{
		type = SPEED
		test = LT
		value = 600
		situationMask = 8
		prestige = Trivial
	}
	CONSTRAINT
	{
		type = SPEED
		test = GT
		value = 300
		situationMask = 8
		prestige = Significant
	}
	CONSTRAINT
	{
		type = SPEED
		test = LT
		value = 1200
		situationMask = 8
		prestige = Significant
	}
	CONSTRAINT
	{
		type = SPEED
		test = GT
		value = 600
		situationMask = 8
		prestige = Exceptional
	}
	CONSTRAINT
	{
		type = SPEED
		test = LT
		value = 2500
		situationMask = 8
		prestige = Exceptional
	}
	CONSTRAINT
	{
		type = SPEEDENV
		test = LT
		value = 200
		prestige = Trivial
	}
	CONSTRAINT
	{
		type = SPEEDENV
		test = GT
		value = 100
		prestige = Trivial
	}
	CONSTRAINT
	{
		type = SPEEDENV
		test = LT
		value = 100
		prestige = Significant
	}
	CONSTRAINT
	{
		type = SPEEDENV
		test = GT
		value = 50
		prestige = Significant
	}
	CONSTRAINT
	{
		type = SPEEDENV
		test = LT
		value = 50
		prestige = Exceptional
	}
	CONSTRAINT
	{
		type = SPEEDENV
		test = GT
		value = 20
		prestige = Exceptional
	}
}

MODULE
{
	name = ModuleSurfaceFX
	thrustProviderModuleIndex = 0
	fxMax = 0.3
	maxDistance = 10
	falloff = 1.8
	thrustTransformName = thrustTransform
}

EFFECTS
{
 ntrsmall
  {
   MODEL_MULTI_PARTICLE
    {
     name = ntrsmall
     modelName = RLA_Stockalike/FX/ntrsmall
     transformName = thrustTransform
     emission = 0.0 0.0
     emission = 0.05 0.2
     emission = 0.75 0.75
     emission = 1.0 1.2
     speed = 0.0 0.7
     speed = 1.0 1.0
    }
    PREFAB_PARTICLE
    {
      prefabName = fx_smokeTrail_light
      transformName = smokePoint
      emission = 0.0 0.0
      emission = 0.05 0.1
      emission = 0.075 1.0
      emission = 1.0 3.0
      speed = 0.0 0.75
      speed = 1.0 1.5
      localOffset = 0, 0, 0
    }
    AUDIO
    {
      channel = Ship
      clip = sound_rocket_hard
      volume = 0.0 0.0
      volume = 0.8 1.0
      volume = 1.0 1.0
      pitch = 0.0 0.2
      pitch = 0.8 1.0
      pitch = 1.0 1.0
      loop = true
    }
   }
   engage
    {
     AUDIO
      {
       channel = Ship
       clip = sound_vent_medium
       volume = 1.0
       pitch = 0.5
       loop = false
      }
    }
   disengage
    {
     AUDIO
      {
       channel = Ship
       clip = sound_vent_soft
       volume = 1.0
       pitch = 1.0
       loop = false
      }
    }
   flameout
    {
     AUDIO
      {
       channel = Ship
       clip = sound_explosion_low
       volume = 1.0
       pitch = 1.0
       loop = false
      }
     }
}

}
